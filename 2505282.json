[
  {
    "bookSourceComment": "基于 番茄APP 开(拼)发(凑)的 Legado 兼容书源\n除正文接口外，此书源其他部分代码，均来自网络",
    "bookSourceGroup": "🍅 番茄",
    "bookSourceName": "🍅 番茄小说（自制）",
    "bookSourceType": 0,
    "bookSourceUrl": "https://test.devv",
    "customOrder": 9,
    "enabled": true,
    "enabledCookieJar": true,
    "enabledExplore": true,
    "exploreUrl": "@js:\nb = [\n  {\n    \"title\": \"我的书架\",\n    \"url\": \"https://fanqienovel.com/reading/bookapi/bookshelf/info/v:version/?aid=1967&iid=0&version_code=56910&update_version_code=56910\",\n    \"style\": {\n      \"layout_flexBasisPercent\": 1,\n      \"layout_flexGrow\": 1\n    }\n  }\n]\n\nsort0=[];//女频\nsort1=[];//男频\npush=(title, url, type1, type2)=>{\n\t\tjson = {\n\t\t\t\ttitle: title,\n\t\t\t\turl: url?url:\"\",\n\t\t\t\tstyle: {\n\t\t\t\t\t\tlayout_flexGrow: 1,\n\t\t\t\t\t\tlayout_flexBasisPercent: type1\n\t\t\t\t\t}\n\t\t\t};\n\t\treturn eval('sort'+type2+'.push(json)');\n\t};\n$$=(gender, tags, status, sort)=>{\n\t\treturn `https://tsearch.toutiaoapi.com/2/wap/search/extra/novel_operator?tab_name=%25E5%2585%25A8%25E9%2583%25A8%25E5%2588%2586%25E7%25B1%25BB&ala_src=novel_tag&gender=${gender}&is_finish=0&iid=2008145514494631&aid=13&app_name=news_article&version_code=692&version_name=6.9.2&abflag=3&partner=novel_tag&offset={{(page-1)*10}}&limit=10&tags=%5B%22${tags}%22%5D&creation_status=${status}&word_num=0&sort=${sort}`\n\t};\n\nstatus=\"ALL\",sort=0;\n[\n\t\t\t\t[\"女\",[[\"无敌\",384],[\"种田\",23],[\"萌宝\",28],[\"美食\",78],[\"游戏动漫\",57],[\"娱乐圈\",43],[\"直播\",69],[\"女扮男装\",388],[\"二次元\",39],[\"团宠\",94],[\"无cp\",392],[\"青梅竹马\",387],[\"病娇\",380],[\"科幻\",8],[\"武侠\",16],[\"年代\",79],[\"重生\",36],[\"灵异\",100],[\"公主\",83],[\"甜宠\",96],[\"盗墓\",81],[\"系统\",19],[\"女强\",86],[\"皇后\",84],[\"推理\",61],[\"文化历史\",62],[\"生活\",48],[\"反派\",369],[\"末世\",68],[\"悬疑\",10],[\"穿越\",37],[\"学霸\",82],[\"扮猪吃虎\",93],[\"清穿\",76],[\"穿书\",382],[\"快穿\",24],[\"皇叔\",87],[\"空间\",44],[\"宠妻\",30],[\"豪门总裁\",29],[\"影视小说\",45],[\"成功励志\",56],[\"职场\",127],[\"民国\",390],[\"都市生活\",2],[\"腹黑\",92],[\"星际\",77],[\"天才\",90],[\"古代言情\",5],[\"家庭\",125],[\"兽世\",72],[\"校园\",4],[\"诗歌散文\",46],[\"虐文\",95],[\"嫡女\",88],[\"王妃\",85],[\"精灵\",89],[\"幻想言情\",32],[\"现代言情\",3],[\"现言甜宠\",395],[\"现言脑洞\",267],[\"先婚后爱\",265],[\"都市日常\",261],[\"古言脑洞\",253],[\"古言萌宝\",249],[\"古言甜宠\",394],[\"现言日常\",269],[\"现言复仇\",268],[\"玄幻言情\",248],[\"医术\",247],[\"马甲\",266]]],\n\t\t[\"男\",[[\"玄幻\",7],[\"神豪\",20],[\"鉴宝\",17],[\"三国\",67],[\"二次元\",39],[\"历史\",12],[\"美食\",78],[\"奶爸\",42],[\"娱乐圈\",43],[\"洪荒\",66],[\"大唐\",73],[\"外卖\",75],[\"末世\",68],[\"都市\",1],[\"宠物\",74],[\"学霸\",82],[\"游戏动漫\",57],[\"科幻\",8],[\"体育\",15],[\"直播\",69],[\"年代\",79],[\"文化历史\",62],[\"诸天万界\",71],[\"海岛\",40],[\"神医\",26],[\"明朝\",126],[\"武侠\",16],[\"灵异\",100],[\"星际\",77],[\"穿越\",37],[\"剑道\",80],[\"都市修真\",124],[\"赘婿\",25],[\"盗墓\",81],[\"推理\",61],[\"无限流\",70],[\"种田\",23],[\"战争\",97],[\"天才\",90],[\"职场\",127],[\"悬疑\",10],[\"成功励志\",56],[\"重生\",36],[\"系统\",19],[\"空间\",44],[\"腹黑\",92],[\"诗歌散文\",46],[\"家庭\",125],[\"影视小说\",45],[\"生活\",48],[\"都市生活\",2],[\"扮猪吃虎\",93],[\"大秦\",377],[\"无敌\",384],[\"漫威\",374],[\"火影\",368],[\"西游\",373],[\"龙珠\",376],[\"聊天群\",381],[\"海贼\",370],[\"奥特同人\",367],[\"特种兵\",375],[\"反派\",369],[\"校花\",385],[\"女帝\",378],[\"单女主\",389],[\"神奇宝贝\",371],[\"九叔\",383],[\"求生\",379],[\"无女主\",391],[\"武魂\",386],[\"网游\",372],[\"战神\",27],[\"都市脑洞\",262],[\"都市种田\",263],[\"都市日常\",261],[\"历史脑洞\",272],[\"玄幻脑洞\",257],[\"奇幻仙侠\",259],[\"都市青春\",396],[\"传统玄幻\",258],[\"历史古代\",273]]]\n\t].map(([title,list], gender)=>{\n\t\tpush('༺ˇ»`ʚ'+title+'生频道ɞ´«ˇ༻',null,1,gender);\n\t\tlist.map([title,tags]=>{\n\t\t\t\tpush('༺ '+title+' ༻',(gender, tags, status, sort), 1,gender);\n\t\t\t\t[\"推荐\",\"评分\",\"热门\"].map((title,sort)=>{\n\t\t\t\t\t\t[ [\"[\"+title+\"]\",\"ALL\"],[\"完结\",\"Finished\"],[\"连载\",\"Loading\"] ].map([title,status]=>{\n\t\t\t\t\t\t\t\treturn push(title, $$(gender, tags, status, sort), 0.25,gender);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t});\n\t});\n\nconst newCategories = [\n    {\"title\": \"榜 单 排 行\",\"url\": \"\",\"style\":{\"layout_flexGrow\": 1,\"layout_flexBasisPercent\": 1}},\n    {\"title\": \"推荐榜单\",\"url\": \"https://api-lf.fanqiesdk.com/api/novel/channel/homepage/rank/rank_list/v2/?aid=13&limit=30&offset={{page -1}}&side_type=10&type=1\",\"style\":{\"layout_flexGrow\": 1,\"layout_flexBasisPercent\": 0.25}},\n    {\"title\": \"完结榜单\",\"url\": \"https://api-lf.fanqiesdk.com/api/novel/channel/homepage/rank/rank_list/v2/?aid=13&limit=30&offset={{page -1}}&side_type=11&type=1\",\"style\":{\"layout_flexGrow\": 1,\"layout_flexBasisPercent\": 0.25}},\n    {\"title\": \"热搜榜单\",\"url\": \"https://api-lf.fanqiesdk.com/api/novel/channel/homepage/rank/rank_list/v2/?aid=13&limit=30&offset={{page -1}}&side_type=12&type=1\",\"style\":{\"layout_flexGrow\": 1,\"layout_flexBasisPercent\": 0.25}},\n    {\"title\": \"黑马榜单\",\"url\": \"https://api-lf.fanqiesdk.com/api/novel/channel/homepage/rank/rank_list/v2/?aid=13&limit=30&offset={{page -1}}&side_type=13&type=1\",\"style\":{\"layout_flexGrow\": 1,\"layout_flexBasisPercent\": 0.25}},\n    {\"title\": \"爆更榜单\",\"url\": \"https://api-lf.fanqiesdk.com/api/novel/channel/homepage/rank/rank_list/v2/?aid=13&limit=30&offset={{page -1}}&side_type=15&type=1\",\"style\":{\"layout_flexGrow\": 1,\"layout_flexBasisPercent\": 0.25}},\n    {\"title\": \"巅峰榜单\",\"url\": \"https://fanqienovel.com/api/author/misc/top_book_list/v1/?limit=50&offset=0\",\"style\":{\"layout_flexGrow\": 1,\"layout_flexBasisPercent\": 0.25}},\n    {\"title\": \"男频精选\",\"url\": \"https://fanqienovel.com/api/rank/recommend/list?type=2&limit=10&offset=0\",\"style\":{\"layout_flexGrow\": 1,\"layout_flexBasisPercent\": 0.25}},\n    {\"title\": \"女频精选\",\"url\": \"https://fanqienovel.com/api/rank/recommend/list?type=3&limit=10&offset=0\",\"style\":{\"layout_flexGrow\": 1,\"layout_flexBasisPercent\": 0.25}},\n    {\"title\": \"每周推荐\",\"url\": \"https://fanqienovel.com/api/rank/recommend/list?type=1&limit=10&offset=0\",\"style\":{\"layout_flexGrow\": 1,\"layout_flexBasisPercent\": 0.25}},\n    {\"title\": \"阅 读 分 类\",\"url\": \"\",\"style\":{\"layout_flexGrow\": 1,\"layout_flexBasisPercent\": 1}},\n    {\"title\": \"都市异能\",\"url\": \"https://api.fanqiesdk.com/api/novel/channel/homepage/new_category/book_list/v1/?aid=1967&offset={{page -1}}&limit=50&category_id=516&gender=1\",\"style\":{\"layout_flexGrow\": 1,\"layout_flexBasisPercent\": 0.25}},\n    {\"title\": \"探案推理\",\"url\": \"https://api.fanqiesdk.com/api/novel/channel/homepage/new_category/book_list/v1/?aid=1967&offset={{page -1}}&limit=50&category_id=506&gender=1\",\"style\":{\"layout_flexGrow\": 1,\"layout_flexBasisPercent\": 0.25}},\n    {\"title\": \"历史古代\",\"url\": \"https://api.fanqiesdk.com/api/novel/channel/homepage/new_category/book_list/v1/?aid=1967&offset={{page -1}}&limit=50&category_id=273&gender=1\",\"style\":{\"layout_flexGrow\": 1,\"layout_flexBasisPercent\": 0.25}},\n    {\"title\": \"异界大陆\",\"url\": \"https://api.fanqiesdk.com/api/novel/channel/homepage/new_category/book_list/v1/?aid=1967&offset={{page -1}}&limit=50&category_id=512&gender=1\",\"style\":{\"layout_flexGrow\": 1,\"layout_flexBasisPercent\": 0.25}},\n    {\"title\": \"游戏主播\",\"url\": \"https://api.fanqiesdk.com/api/novel/channel/homepage/new_category/book_list/v1/?aid=1967&offset={{page -1}}&limit=50&category_id=509&gender=1\",\"style\":{\"layout_flexGrow\": 1,\"layout_flexBasisPercent\": 0.25}},\n    {\"title\": \"奥特同人\",\"url\": \"https://api.fanqiesdk.com/api/novel/channel/homepage/new_category/book_list/v1/?aid=1967&offset={{page -1}}&limit=50&category_id=367&gender=1\",\"style\":{\"layout_flexGrow\": 1,\"layout_flexBasisPercent\": 0.25}},\n    {\"title\": \"诸天万界\",\"url\": \"https://api.fanqiesdk.com/api/novel/channel/homepage/new_category/book_list/v1/?aid=1967&offset={{page -1}}&limit=50&category_id=71&gender=1\",\"style\":{\"layout_flexGrow\": 1,\"layout_flexBasisPercent\": 0.25}},\n    {\"title\": \"盗墓情节\",\"url\": \"https://api.fanqiesdk.com/api/novel/channel/homepage/new_category/book_list/v1/?aid=1967&offset={{page -1}}&limit=50&category_id=81&gender=1\",\"style\":{\"layout_flexGrow\": 1,\"layout_flexBasisPercent\": 0.25}},\n    {\"title\": \"明星娱乐\",\"url\": \"https://api.fanqiesdk.com/api/novel/channel/homepage/new_category/book_list/v1/?aid=1967&offset={{page -1}}&limit=50&category_id=43&gender=1\",\"style\":{\"layout_flexGrow\": 1,\"layout_flexBasisPercent\": 0.25}},\n    {\"title\": \"动漫衍生\",\"url\": \"https://api.fanqiesdk.com/api/novel/channel/homepage/new_category/book_list/v1/?aid=1967&offset={{page -1}}&limit=50&category_id=718&gender=1\",\"style\":{\"layout_flexGrow\": 1,\"layout_flexBasisPercent\": 0.25}},\n    {\"title\": \"玄幻脑洞\",\"url\": \"https://api.fanqiesdk.com/api/novel/channel/homepage/new_category/book_list/v1/?aid=1967&offset={{page -1}}&limit=50&category_id=257&gender=1\",\"style\":{\"layout_flexGrow\": 1,\"layout_flexBasisPercent\": 0.25}},\n    {\"title\": \"都市日常\",\"url\": \"https://api.fanqiesdk.com/api/novel/channel/homepage/new_category/book_list/v1/?aid=1967&offset={{page -1}}&limit=50&category_id=257&gender=1\",\"style\":{\"layout_flexGrow\": 1,\"layout_flexBasisPercent\": 0.25}},\n    {\"title\": \"悬疑灵异\",\"url\": \"https://api.fanqiesdk.com/api/novel/channel/homepage/new_category/book_list/v1/?aid=1967&offset={{page -1}}&limit=50&category_id=751&gender=1\",\"style\":{\"layout_flexGrow\": 1,\"layout_flexBasisPercent\": 0.25}},\n    {\"title\": \"悬疑脑洞\",\"url\": \"https://api.fanqiesdk.com/api/novel/channel/homepage/new_category/book_list/v1/?aid=1967&offset={{page -1}}&limit=50&category_id=539&gender=1\",\"style\":{\"layout_flexGrow\": 1,\"layout_flexBasisPercent\": 0.25}},\n    {\"title\": \"东方玄幻\",\"url\": \"https://api.fanqiesdk.com/api/novel/channel/homepage/new_category/book_list/v1/?aid=1967&offset={{page -1}}&limit=50&category_id=511&gender=1\",\"style\":{\"layout_flexGrow\": 1,\"layout_flexBasisPercent\": 0.25}},\n    {\"title\": \"奇幻仙侠\",\"url\": \"https://api.fanqiesdk.com/api/novel/channel/homepage/new_category/book_list/v1/?aid=1967&offset={{page -1}}&limit=50&category_id=259&gender=1\",\"style\":{\"layout_flexGrow\": 1,\"layout_flexBasisPercent\": 0.25}},\n    {\"title\": \"灵气复苏\",\"url\": \"https://api.fanqiesdk.com/api/novel/channel/homepage/new_category/book_list/v1/?aid=1967&offset={{page -1}}&limit=50&category_id=514&gender=1\",\"style\":{\"layout_flexGrow\": 1,\"layout_flexBasisPercent\": 0.25}},\n    {\"title\": \"无敌爽文\",\"url\": \"https://api.fanqiesdk.com/api/novel/channel/homepage/new_category/book_list/v1/?aid=1967&offset={{page -1}}&limit=50&category_id=384&gender=1\",\"style\":{\"layout_flexGrow\": 1,\"layout_flexBasisPercent\": 0.25}},\n    {\"title\": \"阅 读 标 签\",\"url\": \"\",\"style\":{\"layout_flexGrow\": 1,\"layout_flexBasisPercent\": 1}},\n    {\"title\": \"大秦\",\"url\": \"https://api.fanqiesdk.com/api/novel/channel/homepage/new_category/book_list/v1/?aid=1967&offset={{page -1}}&limit=50&category_id=377&gender=1\",\"style\":{\"layout_flexGrow\": 1,\"layout_flexBasisPercent\": 0.25}},\n    {\"title\": \"明朝\",\"url\": \"https://api.fanqiesdk.com/api/novel/channel/homepage/new_category/book_list/v1/?aid=1967&offset={{page -1}}&limit=50&category_id=126&gender=1\",\"style\":{\"layout_flexGrow\": 1,\"layout_flexBasisPercent\": 0.25}},\n    {\"title\": \"三国\",\"url\": \"https://api.fanqiesdk.com/api/novel/channel/homepage/new_category/book_list/v1/?aid=1967&offset={{page -1}}&limit=50&category_id=67&gender=1\",\"style\":{\"layout_flexGrow\": 1,\"layout_flexBasisPercent\": 0.25}},\n    {\"title\": \"大唐\",\"url\": \"https://api.fanqiesdk.com/api/novel/channel/homepage/new_category/book_list/v1/?aid=1967&offset={{page -1}}&limit=50&category_id=73&gender=1\",\"style\":{\"layout_flexGrow\": 1,\"layout_flexBasisPercent\": 0.25}},\n    {\"title\": \"宋朝\",\"url\": \"https://api.fanqiesdk.com/api/novel/channel/homepage/new_category/book_list/v1/?aid=1967&offset={{page -1}}&limit=50&category_id=501&gender=1\",\"style\":{\"layout_flexGrow\": 1,\"layout_flexBasisPercent\": 0.25}},\n    {\"title\": \"清朝\",\"url\": \"https://api.fanqiesdk.com/api/novel/channel/homepage/new_category/book_list/v1/?aid=1967&offset={{page -1}}&limit=50&category_id=503&gender=1\",\"style\":{\"layout_flexGrow\": 1,\"layout_flexBasisPercent\": 0.25}},\n    {\"title\": \"推理\",\"url\": \"https://api.fanqiesdk.com/api/novel/channel/homepage/new_category/book_list/v1/?aid=1967&offset={{page -1}}&limit=50&category_id=61&gender=1\",\"style\":{\"layout_flexGrow\": 1,\"layout_flexBasisPercent\": 0.25}},\n    {\"title\": \"鉴宝\",\"url\": \"https://api.fanqiesdk.com/api/novel/channel/homepage/new_category/book_list/v1/?aid=1967&offset={{page -1}}&limit=50&category_id=17&gender=1\",\"style\":{\"layout_flexGrow\": 1,\"layout_flexBasisPercent\": 0.25}},\n    {\"title\": \"海贼\",\"url\": \"https://api.fanqiesdk.com/api/novel/channel/homepage/new_category/book_list/v1/?aid=1967&offset={{page -1}}&limit=50&category_id=370&gender=1\",\"style\":{\"layout_flexGrow\": 1,\"layout_flexBasisPercent\": 0.25}},\n    {\"title\": \"武将\",\"url\": \"https://api.fanqiesdk.com/api/novel/channel/homepage/new_category/book_list/v1/?aid=1967&offset={{page -1}}&limit=50&category_id=497&gender=1\",\"style\":{\"layout_flexGrow\": 1,\"layout_flexBasisPercent\": 0.25}},\n    {\"title\": \"国运\",\"url\": \"https://api.fanqiesdk.com/api/novel/channel/homepage/new_category/book_list/v1/?aid=1967&offset={{page -1}}&limit=50&category_id=496&gender=1\",\"style\":{\"layout_flexGrow\": 1,\"layout_flexBasisPercent\": 0.25}},\n    {\"title\": \"乡村\",\"url\": \"https://api.fanqiesdk.com/api/novel/channel/homepage/new_category/book_list/v1/?aid=1967&offset={{page -1}}&limit=50&category_id=11&gender=1\",\"style\":{\"layout_flexGrow\": 1,\"layout_flexBasisPercent\": 0.25}},\n    {\"title\": \"洪荒\",\"url\": \"https://api.fanqiesdk.com/api/novel/channel/homepage/new_category/book_list/v1/?aid=1967&offset={{page -1}}&limit=50&category_id=66&gender=1\",\"style\":{\"layout_flexGrow\": 1,\"layout_flexBasisPercent\": 0.25}},\n    {\"title\": \"空间\",\"url\": \"https://api.fanqiesdk.com/api/novel/channel/homepage/new_category/book_list/v1/?aid=1967&offset={{page -1}}&limit=50&category_id=44&gender=1\",\"style\":{\"layout_flexGrow\": 1,\"layout_flexBasisPercent\": 0.25}},\n    {\"title\": \"群聊\",\"url\": \"https://api.fanqiesdk.com/api/novel/channel/homepage/new_category/book_list/v1/?aid=1967&offset={{page -1}}&limit=50&category_id=381&gender=1\",\"style\":{\"layout_flexGrow\": 1,\"layout_flexBasisPercent\": 0.25}},\n];\n\nJSON.stringify(b.concat(newCategories).concat(sort1).concat(sort0));",
    "jsLib": "let replaceCover = (u) => {\n    if (u.startsWith(\"https://\")) u = u.substring(8)\n    else u = u.substring(7)\n    let uArr = u.split(\"/\")\n    uArr[0] = \"https://p6-novel.byteimg.com/origin\"\n    let uArr2 = []\n    uArr.forEach((x) => {\n        if (!x.includes(\"?\") && !x.includes(\"~\")) uArr2.push(x)\n        else uArr2.push(x.split(\"~\")[0])\n    })\n    u = uArr2.join(\"/\")\n    return u\n}",
    "lastUpdateTime": 1748358588409,
    "loginUi": "[\n{\n\tname: \"　　[账号登录]　　\",\n\ttype: \"button\",\n\taction: \"l2(true)\"\n},\n{\n\tname: \"　　[退出登录]　　\",\n\ttype: \"button\",\n\taction: \"logout()\"\n},\n{\n\tname: \"　　[加入群聊]　　\",\n\ttype: \"button\",\n\taction: \"https://qun.qq.com/universal-share/share?ac=1&authKey=PLQJOzeOd%2B%2BBwdJkw7o%2BNOfU%2Fl9yjmLqN3%2BUWBGmXaHCC46L4tSuRLxD9o13kSDP&busi_data=eyJncm91cENvZGUiOiI5NzE2OTA4NzYiLCJ0b2tlbiI6IkVwV1BURzRqL29HVmVvbXV2eWlORDN3L2ZLY1pZeU1hQUJGT1FvVDhjQ1VIR2xPWmVqdmtKa1dURzFQcU5RMlMiLCJ1aW4iOiIyOTE4MDI0MzQ3In0%3D&data=-WccWzDW6U_HedGfPVtyWlsWGTpc7Dl9bKzvCUhWbXXJmYcA-nItWwMSqWmez8F6T0u5c_Txtarao45Sd62OQg&svctype=4&tempid=h5_group_info\"\n}\n]\n",
    "loginUrl": "// 登录及登录检查\nfunction login_(openBrowser, checkMode) {\n    // java.removeCookie(\"snssdk.com\")\n    var cookie_ = String(cookie.getKey(\"fanqienovel.com\", \"sessionid\")) ? String(cookie.getKey(\"fanqienovel.com\", \"sessionid\")) : (source.getLoginInfoMap() ? source.getLoginInfoMap() : {})['手动登录Token']\n    // java.toast(cookie_)\n    if (cookie_ && cookie_ != \"\" && !checkMode) {\n        if (!source.variableComment) {\n            java.toast(\"请不要重复登录，请先退出登录！\")\n        } else {\n            java.toast(\"您为填写token登录，请手动移除token后再次登录\")\n        }\n        return false\n    }\n    if (openBrowser) {\n        try {\n            java.startBrowserAwait(\"https://fanqienovel.com/\", \"登录\")\n        } catch (e) {\n            java.toast(e)\n        }\n    }\n    // java.log(\"snssdk cookie: \" + java.getCookie(\"snssdk.com\") + \"will be reomved\")\n    try {\n        cookie.removeCookie(\"snssdk.com\")\n    } catch (e) {}\n    // java.log(cookie)\n    var cookie_ = \"sessionid=\" + String(cookie.getKey(\"fanqienovel.com\", \"sessionid\")) ? String(cookie.getKey(\"fanqienovel.com\", \"sessionid\")) : (source.getLoginInfoMap())['手动登录Token']\n    let user\n    try {\n      user = JSON.parse(java.ajax(\"https://fanqienovel.com/api/user/info/v2,\" + JSON.stringify({\n        method: \"GET\",\n        headers: {\n          \"Cookie\": cookie_\n        }\n      }))).data.name\n     } catch (e) {java.log(e)}\n    if (!cookie_ || cookie_ == \"sessionid=\" || !user) {\n        java.toast(\"未获取到登录凭据，登录失败\")\n        return false\n    }\n    java.toast(\"欢迎 \" + user + \"\\n登录成功！\")\n    return true\n}\n\nfunction login() // 一定程度上加上这个函数能够支持更多的版本\n{}\n\nfunction l2(a, b) {\n  try {\n    login_(a, b)\n  } catch (e) {\n    java.log(e+\"\\n\"+e.stack)\n  }\n}\n\n// 取消登录\nfunction logout() {\n    cookie.removeCookie(\"fanqienovel.com\");\n    cookie.removeCookie(\"snssdk.com\");\n    if (String(cookie.getKey(\"fanqienovel.com\", \"sessionid\")) ? String(cookie.getKey(\"fanqienovel.com\", \"sessionid\")) : (source.getLoginInfoMap() ? source.getLoginInfoMap() : {})['手动登录Token']) java.toast(\"请手动移除填写的Token\")\n    else java.toast(\"退出登录成功\");\n}",
    "respondTime": 16184,
    "ruleBookInfo": {
      "author": "author",
      "coverUrl": "@js:replaceCover(java.getString(\"thumb_url\"))",
      "init": "$.data[0]",
      "intro": "&nbsp;&nbsp;\n📕 源名：{{$.original_book_name}}\n📖 别名：{{$.book_flight_alias_name}}\n✏️ 开坑：{{$.create_time##T|\\+.*## }}\n🏷️ 分类：{{$.complete_category##/##,}}\n🏷️ 标签：{{$.tags}}\n👤 主角：{{$.roles##\\[|\\\"|\\]}}\n👁️ 在线：{{$.read_count}}人在读{{\"\\n\"+\"​\"}}\n📜 简介：{{$.abstract}}{{\"\\n\"+\"​\"}}\n📍 {{$.copyright_info##，.*##。}}\n@js:result.replace(/🏷️ 分类：\\n/, '');",
      "kind": "男生{{$.gender}}女生\n{{$.category}}\n连载{{$.creation_status}}完结\n{{$.score}}分\n{{java.timeFormatUTC(java.getString(\"last_chapter_update_time\")*1000,'yyyy-MM-dd',8)}}\n##连载0|1完结|男生0|1女生\n@js:result\n.replace(\"男生2女生\",\"出版\")\n.replace(\"连载4完结\",\"断更\")\n.replace(\"连载-1完结\",\"未知\");",
      "lastChapter": "{{$.last_chapter_title}} • {{java.timeFormat(java.getString(\"last_chapter_update_time\")*1000)}}",
      "name": "book_name",
      "tocUrl": "$.book_id\n@js:\njava.put(\"id\",result);\n\"https://fanqienovel.com/api/reader/directory/detail?bookId=\"+result",
      "wordCount": "word_number"
    },
    "ruleContent": {
      "content": "$.data.data.content"
    },
    "ruleExplore": {
      "author": "$.author##\\s*<\\/?em>\\s*",
      "bookList": "<js>\nlet replaceCover = (u) => {\n// java.log(u)\nif (u.startsWith(\"https://\")) u = u.substring(8)\nelse u = u.substring(7)\nlet uArr = u.split(\"/\")\nuArr[0] = \"https://p6-novel.byteimg.com/origin\"\nlet uArr2 = []\nuArr.forEach((x) => {\n    if (!x.includes(\"?\") && !x.includes(\"~\")) uArr2.push(x)\n    else uArr2.push(x.split(\"~\")[0])\n\t})\nu = uArr2.join(\"/\")\nreturn u\n\t}\n  let list = [];\n  let resultData = JSON.parse(result).data;\n   //java.toast(resultData)\n  let data;\n  if (resultData != null && resultData.book_shelf_info) {\n    data = resultData.book_shelf_info;\n    if (data != null) {\n    let requestData = { books: [] };\n    for (let i in data) {\n      requestData[\"books\"].push({\n        book_id: data[i][\"book_id\"],\n        item_id: \"0\",\n      });\n    }\n    // java.log(JSON.stringify(resultData.book_shelf_info))\n    let booksData = java.ajax(\n      'https://fanqienovel.com/api/bookshelf/multidetail,{method: \"post\",body: ' +\n        JSON.stringify(requestData) +\n        \"}\"\n    );\n    // java.log(booksData)\n    let books =  JSON.parse(booksData).data.detail_list;\n    for (let i in books) {\n      let d = books[i];\n      list.push({\n        src: d,\n        book_name: d.book_name,\n        thumb_url: replaceCover(d.thumb_url),\n        abstract: d.abstract,\n        word_number: d.word_number,\n        book_id: d.book_id,\n      });\n    }\n    }\n  } else if (JSON.parse(result).book_list != null) {\n    data = JSON.parse(result).book_list;\n    for(let i in data){\n      let d = data[i];\n      list.push({\n        src: d,\n        author: d.author,\n        book_name: d.book_name,\n        thumb_url: replaceCover(d.thumb_url),\n        book_id: d.book_id,\n      });\n    }\n  } else if (resultData != null && resultData.list) {\n    data = resultData.list;\n    for(let i in data){\n      let d = data[i];\n      list.push({\n        src: d,\n        author: d.author,\n        book_name: d.bookName,\n        thumb_url: replaceCover(d.thumbUri),\n        abstract: d.abstract,\n        category: d.category,\n        book_id: d.bookId,\n      });\n    }\n  } else if (resultData != null  && (resultData.data || resultData.result)) {\n    if(resultData.result){\n        data = resultData.result;\n    } else{\n        data = resultData.data;\n    }\n    for(let i in data){\n      let d = data[i];\n      //let book = JSON.parse(java.ajax(\"https://api5-normal-sinfonlineb.fqnovel.com/reading/bookapi/multi-detail/v/?aid=1967&iid=1&version_code=999&book_id=\"+d.book_id)).data\n      //lastChapterTitle = book.book_info.last_chapter_title + \"·\"  + java.timeFormat(d.last_publish_time * 1000)\n      list.push({\n        src: d,\n        author: d.author,\n        book_name: d.book_name,\n        thumb_url: replaceCover(d.thumb_url),\n        abstract: d.abstract,\n        word_number: d.word_number,\n        gender: d.gender,\n        category: d.category,\n        score: d.score,\n        last_publish_time: d.last_chapter_update_time,\n        book_id: d.book_id,\n      });\n    }\n  } else list = JSON.parse(result)[0].content\n  JSON.stringify(list)\n</js>$[*]",
      "bookUrl": "https://api5-normal-sinfonlineb.fqnovel.com/reading/bookapi/multi-detail/v/?aid=1967&iid=1&version_code=999&book_id={{$.book_id}}",
      "coverUrl": "$.thumbUri&&audio_thumb_uri||thumb_url&&avator_url",
      "intro": "$.abstract&&rank_score&&publisher&&introduction##\\n",
      "kind": "男生{{$.gender}}女生\n{{$.category}}\n连载{{$.creation_status}}完结\n{{$.score}}分\n{{java.timeFormatUTC(java.getString(\"last_publish_time\")*1000,'yyyy-MM-dd',8)}}\n##连载0|1完结|\\n0?分|1970-.*\n@js:result\n.replace(/男生.女生/, (java.getString(\"$.isbn\") && String(java.getString(\"$.isbn\")) !== \"\") ? \"出版\" : `男生${java.getString(\"$.gender\")}女生`)\n.replace(/男生女生/, \"\")\n.replace(\"男生0\", \"\")\n.replace(\"1女生\", \"\")\n.replace(\"男生2女生\", \"出版\")\n.replace(\"连载4完结\",\"断更\")\n.replace(\"连载-1完结\",\"未知\");",
      "lastChapter": "$.lastChapterTitle&&last_chapter_title",
      "name": "$.book_name",
      "wordCount": "$.word_count||$.word_number"
    },
    "ruleSearch": {
      "author": "author##</?em>",
      "bookList": "$.data.ret_data.*||$..book_info[*]",
      "bookUrl": "https://api5-normal-lf.fqnovel.com/reading/bookapi/multi-detail/v/?aid=1967&iid=1&version_code=999&book_id={{$.book_id}}",
      "checkKeyWord": "异兽迷城",
      "coverUrl": "@js:replaceCover(java.getString(\"thumb_url\"))",
      "intro": "abstract##\\n",
      "kind": "category&&score",
      "name": "book_name||title@put:{book_id: book_id}##<em>|</em>|《|》",
      "wordCount": "连载{{$.creation_status}}完结##连载0|1完结"
    },
    "ruleToc": {
      "chapterList": "@js:\nvar data = JSON.parse(result);\nvar volume = data.data.chapterListWithVolume;\n\nvar flattenChapters = function (chapters) {\n    return chapters.flatMap(chapter => Array.isArray(chapter) ? flattenChapters(chapter) : chapter);\n}\n\nvar list = flattenChapters(volume);\nlist.forEach(item => {\n    const volumeName = Number(item.volume_name) === 0 ? \"第一卷：默认\" : item.volume_name;\n    item.name = `${item.title}`;\n    item.url = `https://fqnovel.ceseet.me/content?item_id=${item.itemId}`;\n    item.info = `${volumeName} | ${java.timeFormat(item.firstPassTime * 1000)}`;\n});\n\nlist;",
      "chapterName": "name",
      "chapterUrl": "url",
      "updateTime": "info"
    },
    "searchUrl": "https://novel.snssdk.com/api/novel/channel/homepage/search/search/v1/?device_platform=android&parent_enterfrom=novel_channel_search.tab.&offset={{(page-1)*10}}&aid=1967&q={{key}}",
    "weight": 0
  },
  {
    "bookSourceComment": "/*\n\t作者：明月照大江\n\t提醒：此书源为免费制作并分享\n\t更新地址：https://skybook.pages.dev\n*/",
    "bookSourceGroup": "🌙 ΑΡI,出版",
    "bookSourceName": "🌙 番茄HD",
    "bookSourceType": 0,
    "bookSourceUrl": "番茄小说-hide#HD",
    "bookUrlPattern": "https://api.fanqiesdk.com/reading/bookapi/multi-detail/v/?aid=1967&iid=1&version_code=999&book_id=\\d+",
    "concurrentRate": "2000",
    "customOrder": 32,
    "enabled": true,
    "enabledCookieJar": false,
    "enabledExplore": true,
    "exploreUrl": "@js:\nlet sort = [];\npush = (title, url, type) => sort.push({\n    title: title,\n    url: url,\n    style: {\n        layout_flexBasisPercent: type\n    }\n});\n\n    push('每周推荐', 'https://fanqienovel.com/api/rank/recommend/list?type=1&limit=10&offset=0', 0.29);\n    push('男频精选', 'https://fanqienovel.com/api/rank/recommend/list?type=2&limit=10&offset=0', 0.29);\n\t  push('女频精选', 'https://fanqienovel.com/api/rank/recommend/list?type=3&limit=10&offset=0', 0.29);\n    push('巅峰榜单', 'https://fanqienovel.com/api/author/misc/top_book_list/v1/?limit=50&offset=0', 0.29);\n    push('出版榜单', 'https://fanqienovel.com/api/node/publication/list?page_index={{page -1}}&page_count=50', 0.29);\n    push('最近更新', '', 0.29);\n\t\n\tA=[[\"推荐\",\"10\"],[\"完结\",\"11\"],[\"热搜\",\"12\"]]\t;\n[[\"男频\",\"1\"],[\"女频\",\"0\"]].map([title,id]=>{\n\tpush('▱▱▱▱'+title+'榜单▱▱▱▱', null, 1);\n\tif(id==2){ \tA=A.slice(1,A.length-1) }\n\t\tA.map([title,uri]=>{\t\t\t\n\t\t  \turl= `https://novel.snssdk.com/api/novel/channel/homepage/rank/rank_list/v2/?aid=13&app_name=news_article&app_version=9.7.3&channel=tengxun_tt&device_platform=android&os=android&device_type=ProjectTitan&os_api=29&os_version=10&openlive_plugin_status=1&isTTWebViewHeifSupport=0&limit=100&offset={{(page-1)*100}}&side_type=${uri}&type=${id}`;\n\t\t\t\tpush(title, url, 0.29);\t\t\t\n\t\t\t});\n\t});\n\t\n\t\n\tcategory = () =>{\n\t\t\tcategory_url = \"https://novel.snssdk.com/api/novel/channel/homepage/new_category/page/data/v1/?aid=13\";\nreturn  JSON.parse(java.ajax(category_url)).data\t\t\n\t\t}\n\t\t  \n  json = (data) => {\n     boy = data.boy_category;\n     girl = data.girl_category;\n     publish = data.publish_category;\n     json = [[\"男频\",\"gender=1\",boy],[\"女频\",\"gender=0\",girl],[\"出版\",\"genre_type=160\",publish]];\n     return JSON.parse(JSON.stringify(json));\n   }\t\n   \n\t\tjson(category()).map([tit1,gender,category]=>{\n\t    push('▱▱▱▱'+tit1+'▱▱▱▱', null, 1);\n     category.map(($,index)=>{\n     \tindex++;\n\t    title = $.category_name;\n     \tcid = $.category_id;\n\t    url=  `https://novel.snssdk.com/api/novel/channel/homepage/new_category/book_list/v1/?aid=1967&app_name=news_article&app_version=9.7.3&channel=tengxun_tt&creation_status=9&device_platform=android&enter_from=novel_category&novel_host&novel_version&version_code=973&version_name=9.7.3&word_count=9&os=android&device_type=ProjectTitan&os_api=29&os_version=10&offset={{(page-1)*100}}&limit=100&category_id=${cid}&${gender}`;\n\t\t\t\tpush(title, url, 0.29);\n\t\n  \t\n      });\n  });\n\nJSON.stringify(sort);",
    "jsLib": "let replaceCover=t=>{var s=(t=t.startsWith(\"https://\")?t.substring(8):t.substring(7)).split(\"/\");s[0]=\"https://p6-novel.byteimg.com/origin\";let i=[];return s.forEach(t=>{t.includes(\"?\")||t.includes(\"~\")?i.push(t.split(\"~\")[0]):i.push(t)}),t=i.join(\"/\")};\n\nfunction getOutIdea(t,e,o){var{book:a,java:r}=this;if(32==a.type||64==a.type)return o;var t=`https://reading.snssdk.com/reading/ugc/idea/list/v/?item_id=${t}&book_id=${a.bookUrl.match(/book_id=(\\d+)/)[1]}&item_version=${e}&aid=1967`,a=/<\\/p>/.test(o),e=a?\"</p>\":\"\\n\",i=(o=a?o.replace(/<p><\\/p>/g,\"\"):o).split(e);try{var n,s=JSON.parse(r.ajax(t)).data.idea_data;for(n in s){var d,_=s[n];_.show_out_comments&&0<_.show_out_comments.length&&(d=_.show_out_comments[0],i[Number(n)]+=`\n【${d.user_info.user_name}： ${d.text}】`)}}catch(t){return r.log(\"神想法匹配失败: \"+t),o}return i.join(e)}\n\n\nfunction getComic(a){let r=a.match(/<article>([\\s\\S]*?)<\\/article>/);try{let t=JSON.parse(r?r[1].replace(/\\&/g,'\"').replace(/\\;/g,\"\").replace(/\\#34/g,\"\"):a);return(r?t.skeleton.data:t.picInfos).map(e=>`<img src=\"https://p3-novel.byteimg.com/origin/${r?t.materials[e.element_name].data.web_uri:\"novel-pic/\"+e.md5}\">`).join(\"<br>\")}catch(e){return((r=a.match(/<body>([\\s\\S]*?)<\\/body>/))?r[1]:a).toString().replace(/\\<\\!DOCTYPE html.*/g,\"\").replace(/\\<tt_keyword_ad.*\\<\\/tt_keyword_ad\\>/,\"\").replace(/\\<a epub.*\\>\\<\\/a\\>/g,\"\")}}\n",
    "lastUpdateTime": 1747704170992,
    "loginCheckJs": "if (result.body() == \"\") {\n\tjava.toast('重试中......')\n\tPackages.java.lang.Thread.sleep(1000)\n\tjava.initUrl()\n\tresult = java.getStrResponse()\n}\nresult",
    "respondTime": 14294,
    "ruleBookInfo": {
      "author": "author",
      "coverUrl": "@js:replaceCover(java.getString(\"thumb_url\"))",
      "init": "<js>\ntype = java.getString(\"$..genre\", result);\nbid = java.getString(\"$..book_id\", result);\njava.put(\"btype\",type);\njava.put(\"bid\",bid);\nresult\n</js>\ndata[0]",
      "intro": "&nbsp;&nbsp;\n📕 源名：{{$.original_book_name}}\n📖 别名：{{$.book_flight_alias_name}}\n✏️ 开坑：{{$.create_time##T|\\+.*## }}\n🏷️ 标签：{{$.tags}}\n👤 主角：{{$.roles##\\[|\\\"|\\]}}\n👁️ 在线：{{$.read_count}}人在读{{\"\\n\"+\"​\"}}\n📜 简介：{{$.abstract}}{{\"\\n\"+\"\"}}\n📍 {{$.copyright_info##，.*##。}}\n@js:result.replace(/.+：(人在读)?\\n/g,\"\")",
      "kind": "男生{{$.gender}}女生\n{{$.category}}\n连载{{$.creation_status}}完结\n{{$.score}}分\n{{java.timeFormatUTC(java.getString(\"last_chapter_update_time\")*1000,'yyyy-MM-dd',8)}}\n##连载0|1完结|男生0|1女生\n@js:result\n.replace(\"男生2女生\",\"出版\")\n.replace(\"连载4完结\",\"断更\")\n.replace(\"连载-1完结\",\"未知\");",
      "lastChapter": "{{$.last_chapter_title}} • {{java.timeFormat(java.getString(\"last_chapter_update_time\")*1000)}}",
      "name": "book_name",
      "tocUrl": "https://fanqienovel.com/api/reader/directory/detail?bookId={{$.book_id}}",
      "wordCount": "word_number"
    },
    "ruleContent": {
      "content": "@js:try{let rawUrl=\"aHR0cHM6Ly9naXRodWIubW9leXkueHl6L2h0dHBzOi8vcmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbS9za3liYmsxMDAxL1lESlMvcmVmcy9oZWFkcy9tYWluL3RvLmpz\",url=java.base64Decode(rawUrl),scn=\"to-js\",md5=java.md5Encode16(url),etag=java.head(url,{}).headers(\"etag\"),prevEtag=String(cache.get(scn)),scriptCode=(etag!=prevEtag&&(java.log(\"已更新脚本\"),cache.put(scn,etag),cache.delete(md5)),String(java.importScript(url)));eval(scriptCode),result}catch(e){java.log(\"脚本加载出错：\"+e)}",
      "imageStyle": "FULL",
      "replaceRegex": "##<!DOCTYPE.*dtd\">|<tt.*ad>|{{chapter.title}}"
    },
    "ruleExplore": {
      "author": "author",
      "bookList": "data.data||data.list||book_list||data.publication_list||data.result",
      "bookUrl": "https://api.fanqiesdk.com/reading/bookapi/multi-detail/v/?aid=1967&iid=1&version_code=999&book_id={{$.book_id||$.bookId}}",
      "coverUrl": "audio_thumb_uri||thumb_url||thumbUri##(\\d+)-tt##6-novel",
      "intro": "abstract##\\s",
      "kind": "{{$.category}}\n{{$.book_type}}\n{{$.score}}分\n连载{{$.creation_status}}完结\n{{$.source}}\n{{$.tags}}\n@js:result.replace(/连载0完结/g,'完结').replace(/连载1完结/g,'连载').replace(/连载4完结/g,'已断更').replace(/连载完结/g,'完结')",
      "lastChapter": "{{$.last_chapter_title}}",
      "name": "book_name||bookName",
      "wordCount": "word_number"
    },
    "ruleSearch": {
      "author": "author##</?em>",
      "bookList": "$.data.ret_data.*||$..book_info[*]",
      "bookUrl": "https://api5-normal-sinfonlineb.fqnovel.com/reading/bookapi/multi-detail/v/?aid=1967&iid=1&version_code=999&book_id=@get:{book_id}",
      "coverUrl": "@js:replaceCover(java.getString(\"thumb_url\"))",
      "intro": "abstract##\\n",
      "kind": "category&&score",
      "name": "book_name||title@put:{\"book_id\": \"book_id\"}##<em>|</em>|《|》",
      "wordCount": "连载{{$.creation_status}}完结##连载0|1完结"
    },
    "ruleToc": {
      "chapterList": "@js:\nlet type = +(java.get('btype'))\njava.log(type)\nswitch (type) {\n  case 1:\n    book.type = 64;\n    break;\n  case 4:\n    book.type = 32;\n    break;\n  default:\n    book.type = 8;\n}\n\nconst list = [];\n\nfunction b64Url(item_id) {\n  const url = book.type === 32 \n    ? `https://reading.snssdk.com/reading/reader/audio/playinfo/?tone_id=1&item_ids=${item_id}&pv_player=-1&aid=1967`\n    : `data:;base64,${java.base64Encode(item_id)},{\"type\":\"pyfqc\"}`;\n  return String(url);\n}\n\nconst List = JSON.parse(result).data.chapterListWithVolume;\nList.forEach($ => {\n  $.forEach((_, i) => {\n    const name = _.volume_name || \"第一卷：默认\";\n    const time = java.timeFormat(_.firstPassTime * 1000);\n    if (!i && book.type !== 32) list.push({ title: name, vo: true });\n    list.push({ title: _.title, vo: false, itemid: b64Url(_.itemId), info: `${name} | ${time}` });\n  });\n});\n\nlist;",
      "chapterName": "title",
      "chapterUrl": "itemid",
      "isVolume": "vo",
      "updateTime": "info"
    },
    "searchUrl": "https://api-sinfonlinea.fanqiesdk.com/api/novel/channel/homepage/search/search/v2/?device_platform=android&parent_enterfrom=novel_channel_search.tab.&offset={{(page-1)*10}}&aid=1967&q={{key}}",
    "variableComment": "var javaImport = new JavaImporter();\njavaImport.importPackage(\n    Packages.java.lang,\n    Packages.javax.crypto.spec,\n    Packages.javax.crypto,\n    Packages.java.util,\n    Packages.java.io,\n    Packages.java.security,\n    Packages.java.math\n);\nwith(javaImport) {   \nvar big_c = new BigInteger(\"2410312426921032588552076022197566074856950548502459942654116941958108831682612228890093858261341614673227141477904012196503648957050582631942730706805009223062734745341073406696246014589361659774041027169249453200378729434170325843778659198143763193776859869524088940195577346119843545301547043747207749969763750084308926339295559968882457872412993810129130294592999947926365264059284647209730384947211681434464714438488520940127459844288859336526896320919633919\");\nvar big_b = new BigInteger(\"2\");\nvar arry_d = java.base64DecodeToByteArray(\"rCXGfd2POMGzeiNIgo4iLg==\");\nvar thisd;\nfunction KeyPair_e(){\n        var keyPairGenerator = KeyPairGenerator.getInstance(\"DH\");\n        var b = keyPairGenerator;\n        var dHParameterSpec = new DHParameterSpec(big_c, big_b);\n        var keyPairGenerator2 = b;\n        if (keyPairGenerator2 == null) {\n            return null;\n        }\n        keyPairGenerator2.initialize(dHParameterSpec);\n        var keyPairGenerator3 = b;\n        if (keyPairGenerator3 == null) {\n            return null;\n        }\n        var generateKeyPair = keyPairGenerator3.generateKeyPair();\n        return generateKeyPair;\n    }\n\nfunction  keyPair2arry(keyPair) {\n        var publicKey = keyPair.getPublic();\n        if (publicKey == null) {\n            return null;\n        }\n        var byteArray = publicKey.getY().toByteArray();\n        return byteArray;\n    }\nfunction getZeroByteArray() {\n        // 创建一个长度为16的字节数组\n        var zeroByteArray = new Array(16);\n        // 将数组中的每个元素初始化为0\n        for (var i = 0; i < zeroByteArray.length; i++) {\n            zeroByteArray[i] = 0;\n        }\n        return zeroByteArray;\n    }\n function Random_a() {\n        var bArr = getZeroByteArray();\n        //new Random().nextBytes(bArr);\n        return bArr;\n    }\n function encode_a(bArr, bArr2, bArr3) {      \n        var secretKeySpec = new SecretKeySpec(bArr, \"AES\");\n        var ivParameterSpec = new IvParameterSpec(bArr2);\n        var instance = Cipher.getInstance(\"AES/CBC/PKCS7Padding\");\n        instance.init(1, secretKeySpec, ivParameterSpec);\n        var doFinal = instance.doFinal(bArr3);\n        return doFinal;\n    }\n    \nfunction encode_i(bArr, bArr2, bArr3) {\n\t/*\n\tjava.log(JSON.stringify(bArr));\n\tjava.log(JSON.stringify(bArr2));\n\tjava.log(JSON.stringify(bArr3));\n\t*/\n        var secretKeySpec = new SecretKeySpec(bArr, \"AES\");\n        \n        var ivParameterSpec = new IvParameterSpec(bArr2);\n        \n        var cipher = Cipher.getInstance(\"AES/CBC/PKCS7Padding\");\n        \n        cipher.init(2, secretKeySpec, ivParameterSpec);\n        var doFinal = cipher.doFinal(bArr3);\n        return doFinal;\n    }\n    \n\n function Pair_y() {\n        thisb = KeyPair_e();\n        thisd = thisb;\n        thisc = Random_a();\n        var keyPair = thisb;\n        if (keyPair == null) {\n            return null;\n        }\n        var a2 = keyPair2arry(keyPair);\n        var d = arry_d;\n        var bArr = thisc;\n        if (bArr == null) {\n            return null;\n        }\n        var a3 = encode_a(d, bArr, a2);    \n        var bArr2 = thisc;\n        if (bArr2 == null) {\n            return null;\n        }        \n        var encode = Packages.cn.hutool.core.codec.Base64.encode(ArraysKtplus(bArr2, a3));\n        return encode;\n    }\n\nfunction ArraysKtplus(bArr2, a3) {\n    // 合并两个字节数组\n    var combinedArray = new Array(bArr2.length + a3.length); \n    combinedArray = bArr2.concat(a3);\n    return combinedArray; \n}\n\nfunction sliceArray(array, start, end) {\n  return array.slice(start, end);\n}\n\n  function encrypt_f(bArr, keyPair, bArr2, bArr3) {        \n        var generatePublic = KeyFactory.getInstance(\"DH\").generatePublic(\n        \tnew DHPublicKeySpec(new BigInteger(1, bArr), big_c, big_b));      \n        var keyAgreement = KeyAgreement.getInstance(\"DH\");\n        keyAgreement.init(keyPair.getPrivate());\n        keyAgreement.doPhase(generatePublic, true);\n        var generateSecret = keyAgreement.generateSecret();\n        var length = generateSecret.length;\n        var i = 0;\n        \n        for (var i2 = 0; i2 < length && generateSecret[i2] == 0; i2++) {\n            i++;\n        }\n        \n        var length2 = generateSecret.length;\n        if (i + 31 >= length2) {\n            i = length2 - 32;\n        }\n        let subArray;\n \t       if (i >= 0 && i+31 <generateSecret.length) {\n  subArray = sliceArray(generateSecret, i, i + 32);\n  java.log('索引数组');\n} else {\n\tsubArray=null;\n  java.log('索引超出数组界限');\n}\n        return encode_i(subArray, bArr3, bArr2);\n    }\n\nfunction x_f(str, str2, str3) {\n        var z;    \n        if (parseInt(str) == 1) {\n        \t\n            if (String(str2).length() > 0) {\n                z = true;\n            } else {\n                z = false;\n            }\n            if (z) {\n                var decode = android.util.Base64.decode(String(str3), 0);               \n                \n                let slice = decode.slice(0, 16);\n                \n                var decode2 = android.util.Base64.decode(String(str2), 0);\n                \n                var keyPair = thisd;\n                if (keyPair == null) {\n                \t    java.log('keyPair is null');\n                    return null;\n                }\n                var copyOfRange = Arrays.copyOfRange(decode, 16, decode.length);\n                \n                return new String(encrypt_f(decode2,keyPair,copyOfRange, slice),\"UTF-8\");\n            }\n            return str3;\n        }\n        return str3;\n    }\n\n}",
    "weight": 0
  }
]